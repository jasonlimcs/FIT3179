{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 400,
  "height": 250,
  "title": { "text": "ARR vs Student-Teacher Ratio by State (2024)", 
  "subtitle": "Hover over the points to highlight specific States/Territories",
  "subtitleColor": "gray",
  "subtitlePadding": 10,
  "fontSize": 18 },

  "data": { "url": "https://raw.githubusercontent.com/jasonlimcs/FIT3179/main/DataVis2/dotplot.csv" },

  

  "layer": [
    {
      "mark": { "type": "point", "filled": true, "size": 60 },
      "encoding": {
        "x": {
          "field": "ratio", "type": "quantitative",
          "title": "Student-Teacher Ratio",
          "scale": { "zero": false }
        },
        "y": {
          "field": "arr", "type": "quantitative",
          "title": "Apparent Retention Rate (ARR)",
          "scale": { "zero": false }
        },
        "color": { "field": "state", "type": "nominal", "title": "State", "legend": { "orient": "right" } },
        "shape": { "field": "affiliation", "type": "nominal", "title": "Affiliation" },
        "opacity": { "condition": { "param": "hoverState", "value": 0.8 }, "value": 0.15 },
        "tooltip": [
          { "field": "state", "type": "nominal", "title": "State" },
          { "field": "affiliation", "type": "nominal", "title": "Affiliation" },
          { "field": "year", "type": "quantitative", "title": "Year" },
          { "field": "ratio", "type": "quantitative", "title": "Student-Teacher Ratio", "format": ".2f" },
          { "field": "arr", "type": "quantitative", "title": "ARR", "format": ".2f" }
        ]
      },
      "params": [
            {
            "name": "hoverState",
            "select": { "type": "point", "fields": ["state"], "on": "mouseover", "clear": "mouseout" }
            }
        ]
    },
    {
      "mark": {
        "type": "text",
        "align": "left",
        "baseline": "bottom",
        "dx": 5,
        "dy": -5,
        "fontSize": 10,
        "fontStyle": "italic",
        "color": "#555",
        "font": "sans-serif"
      },
      "encoding": {
        "x": { "value": 200 },
        "y": { "value": 220 },
        "text": { "value": "ACT has low ARR and student-teacher ratio across all years" }
      }
    }
  ],

  "config": { "view": { "stroke": "transparent" } }
}
